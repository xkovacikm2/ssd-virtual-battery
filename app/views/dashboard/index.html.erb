<div class="dashboard-container">
  <h1 class="dashboard-title">Prehľad virtuálnej batérie</h1>
  
  <div class="year-summary">
    <h2 class="section-title">Ročný súhrn (<%= Date.current.year %>)</h2>
    
    <div class="metrics-grid">
      
      <!-- Aktuálny stav nabitia -->
      <div class="metric-card metric-card--current-charge">
        <div class="metric-label">Aktuálny stav nabitia</div>
        <div class="metric-value">
          <%= number_with_precision(@summary[:current_charge], precision: 2) %>
        </div>
        <div class="metric-unit">kWh</div>
      </div>

      <!-- Exportované do batérie -->
      <div class="metric-card metric-card--exported">
        <div class="metric-label">Exportované do virtuálnej batérie</div>
        <div class="metric-value">
          <%= number_with_precision(@summary[:total_exported_to_battery], precision: 2) %>
        </div>
        <div class="metric-unit">kWh</div>
      </div>

      <!-- Importované z batérie -->
      <div class="metric-card metric-card--imported-battery">
        <div class="metric-label">Importované z virtuálnej batérie</div>
        <div class="metric-value">
          <%= number_with_precision(@summary[:total_imported_from_battery], precision: 2) %>
        </div>
        <div class="metric-unit">kWh</div>
      </div>

      <!-- Importované zo siete -->
      <div class="metric-card metric-card--imported-grid">
        <div class="metric-label">Importované z verejnej siete</div>
        <div class="metric-value">
          <%= number_with_precision(@summary[:total_imported_from_grid], precision: 2) %>
        </div>
        <div class="metric-unit">kWh</div>
      </div>

    </div>
  </div>

  <% if @latest_reading %>
    <div class="latest-reading">
      <h2 class="section-title">Posledný záznam (<%= @latest_reading.date.strftime('%d. %m. %Y') %>)</h2>
      
      <div class="metrics-grid">
        
        <!-- Stav nabitia -->
        <div class="metric-card metric-card--charge-green">
          <div class="metric-label">Stav nabitia</div>
          <div class="metric-value">
            <%= number_with_precision(@latest_reading.current_charge, precision: 2) %>
          </div>
          <div class="metric-unit">kWh</div>
        </div>

        <!-- Exportované do batérie -->
        <div class="metric-card metric-card--exported-orange">
          <div class="metric-label">Exportované do batérie</div>
          <div class="metric-value">
            <%= number_with_precision(@latest_reading.exported_to_battery, precision: 2) %>
          </div>
          <div class="metric-unit">kWh</div>
        </div>

        <!-- Importované z batérie -->
        <div class="metric-card metric-card--imported-purple">
          <div class="metric-label">Importované z batérie</div>
          <div class="metric-value">
            <%= number_with_precision(@latest_reading.imported_from_battery, precision: 2) %>
          </div>
          <div class="metric-unit">kWh</div>
        </div>

        <!-- Importované zo siete -->
        <div class="metric-card metric-card--imported-red">
          <div class="metric-label">Importované zo siete</div>
          <div class="metric-value">
            <%= number_with_precision(@latest_reading.imported_from_grid, precision: 2) %>
          </div>
          <div class="metric-unit">kWh</div>
        </div>

      </div>
    </div>
  <% else %>
    <div class="no-data">
      <p>
        <strong>Zatiaľ nie sú k dispozícii žiadne údaje.</strong> Údaje budú zhromažďované na pozadí.
      </p>
    </div>
  <% end %>

</div>
