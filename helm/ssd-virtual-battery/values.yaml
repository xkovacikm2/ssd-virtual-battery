# Rails application configuration
rails:
  replicaCount: 1
  image:
    repository: hocikto19/ssd-virtual-battery
    tag: latest
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

  # Rails environment
  railsEnv: production
  
  # Secret key base for Rails (generate with: rails secret)
  secretKeyBase: ""

# SSD API configuration
ssdApi:
  username: ""
  password: ""
  pointOfDeliveryId: ""

# PostgreSQL database configuration
postgresql:
  enabled: true
  
  image:
    repository: postgres
    tag: "16-alpine"
    pullPolicy: IfNotPresent
  
  auth:
    database: ssd_virtual_battery_production
    username: ssd_virtual_battery
    password: ""
    postgresPassword: ""
  
  storage:
    size: 10Gi
    storageClassName: ""
  
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# Ingress configuration (Traefik IngressRoute CRD)
ingress:
  enabled: true
  hostname: ssd-virtual-battery.example.com
  # TLS configuration with cert-manager
  tls:
    enabled: false
    issuer: letsencrypt-prod  # ClusterIssuer name
  # Optional: Add Traefik middlewares (e.g., for rate limiting, headers, etc.)
  # middlewares:
  #   - name: my-middleware
  #     namespace: default

# Service configuration
service:
  type: ClusterIP
  port: 3000

# Solid Queue worker configuration
worker:
  enabled: true
  replicaCount: 1
  resources:
    limits:
      cpu: 250m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
